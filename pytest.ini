# ======================================================================
# ‚öñÔ∏è  Legal Assistant Arbitrage v2.9 ‚Äî Pytest Configuration
# ----------------------------------------------------------------------
#  Protocol: "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —á–∏—Å—Ç–∫–∞" (Clean Protocol v2.9)
#  –¶–µ–ª—å: –µ–¥–∏–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç—É—Ä –¥–ª—è FastAPI, Integrations –∏ DevOps-—Å–ª–æ—è
#  –ê–≤—Ç–æ—Ä: Aleksej (Architect & Maintainer)
#  –î–∞—Ç–∞: 16.10.2025
# ======================================================================

[pytest]

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
rootdir = .

# --------------------------------------------------
# üß≠ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—É—Ç–∏
# --------------------------------------------------
# –£–∫–∞–∑—ã–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å Python-–º–æ–¥—É–ª–µ–π
pythonpath = backend

# –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤
testpaths = backend/app/tests

# –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
norecursedirs =
    .git
    .venv
    venv
    node_modules
    artifacts
    backup
    scripts
    patches

# --------------------------------------------------
# üß™ –ú–∞—Ä–∫–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤
# --------------------------------------------------
markers =
    smoke: –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞
    integration: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (respx/httpx)
    ci: —Ç–µ—Å—Ç—ã, –∑–∞–ø—É—Å–∫–∞–µ–º—ã–µ –≤ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–µ
    regression: —Ç–µ—Å—Ç—ã —Ä–µ–≥—Ä–µ—Å—Å–∞ –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º API-–º–æ–¥—É–ª—è–º
    auth: —Ç–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    telegram: —Ç–µ—Å—Ç—ã Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –±–æ—Ç–∞
    kad: —Ç–µ—Å—Ç—ã KAD API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    pravo: —Ç–µ—Å—Ç—ã Pravo.gov.ru –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

# --------------------------------------------------
# ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
# --------------------------------------------------
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º pytest-asyncio
asyncio_mode = auto

# --------------------------------------------------
# üßæ –û—Ç—á—ë—Ç—ã –∏ –≤—ã–≤–æ–¥
# --------------------------------------------------
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤
log_cli = true
log_cli_level = INFO
log_cli_format = [%(asctime)s] [%(levelname)s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# --------------------------------------------------
# üß© –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—É—é —á–∏—Å—Ç–∫—É"
# --------------------------------------------------
# –°—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —à—É–º–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ pytest (–±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤!)
addopts = -ra --tb=short -q --disable-warnings

# --------------------------------------------------
# üì¶ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è
# --------------------------------------------------
# ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Makefile-—Ü–µ–ª—è–º–∏:
#     make test
#     make smoke
#     make integration-test
# ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ CI –ø–∞–π–ø–ª–∞–π–Ω–µ: .github/workflows/ci_integrations.yml
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ AutoAuth v3.3 –∏ Telegram notifier
# --------------------------------------------------
# Legal Assistant Arbitrage ‚Äî Integration & Intelligence Phase (v2.9)
# ¬© Aleksej, 2025
# ======================================================================
