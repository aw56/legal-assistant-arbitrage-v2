–û—Ç–ª–∏—á–Ω–æ üöÄ
–í–æ—Ç –ø–æ–ª–Ω—ã–π **`docs/README.v2.md`** –≤ —Å—Ç–∏–ª–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã. –Ø —Å–¥–µ–ª–∞–ª –µ–≥–æ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –¥–æ–ø–æ–ª–Ω—è–ª —Ç–≤–æ–π ¬´–≤–∏—Ç—Ä–∏–Ω–Ω—ã–π¬ª `README.md`, –∏ –≤–∫–ª—é—á–∏–ª –≤—Å–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –º–æ–¥—É–ª–∏ –∏ –Ω–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è:

````markdown
# üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî Legal Assistant Arbitrage v2

–ü—Ä–æ–µ–∫—Ç: **–¶–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ —é—Ä–∏—Å—Ç–∞ –ø–æ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–º –¥–µ–ª–∞–º**
–í–µ—Ä—Å–∏—è: **v2 (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)**
–°—Ç–µ–∫: **Python 3.12 ¬∑ FastAPI ¬∑ SQLAlchemy 2 ¬∑ Pydantic v2 ¬∑ Alembic ¬∑ PostgreSQL ¬∑ SQLite**

---

## üìå –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å **–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –∏ –ø—Ä–æ—Ü–µ—Å—Å—É–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π**.
- –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- **–ü—Ä–∞–≤–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑** —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –Ω–æ—Ä–º –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.
- –û—Ü–µ–Ω–∫–∞ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤ —Å–ø–æ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏.
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è **–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π** –∏ —Ç–∏–ø–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
- –ü–æ–ª–Ω–∞—è **–∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é (CRM, Telegram-–±–æ—Ç, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞).

---

## üß≠ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Clean Architecture)**
   - API (FastAPI) ‚Üí –°–µ—Ä–≤–∏—Å—ã ‚Üí –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚Üí –ú–æ–¥–µ–ª–∏ ‚Üí –ë–î.
   - –ò–∑–æ–ª—è—Ü–∏—è —Å–ª–æ—ë–≤, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑ –ª–æ–º–∫–∏ —Å–∏—Å—Ç–µ–º—ã.

2. **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å**
   - Docker Compose (dev/prod).
   - Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π.
   - –ß—ë—Ç–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`requirements.txt`).

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env`, –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞.
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ PostgreSQL.
   - –°–µ–∫—Ä–µ—Ç—ã –¥–ª—è JWT.

4. **–ß–∏—Å—Ç—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**
   - Pydantic-—Å—Ö–µ–º—ã v2 (`from_attributes=True`).
   - –Ø–≤–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ API.
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑ OpenAPI.

5. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö –ë–î**
   - SQLite (–ª–æ–∫–∞–ª—å–Ω–æ/—Ç–µ—Å—Ç—ã).
   - PostgreSQL (docker/prod).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
legal-assistant-arbitrage-v2/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ alembic/              # –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îú‚îÄ‚îÄ main.py           # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ       ‚îú‚îÄ‚îÄ database.py       # –¥–≤–∏–∂–æ–∫ SQLAlchemy
‚îÇ       ‚îú‚îÄ‚îÄ models.py         # ORM-–º–æ–¥–µ–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ routes/           # –º–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ       ‚îú‚îÄ‚îÄ schemas/          # Pydantic-—Å—Ö–µ–º—ã
‚îÇ       ‚îú‚îÄ‚îÄ services/         # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–Ω–∞ –±—É–¥—É—â–µ–µ)
‚îÇ       ‚îî‚îÄ‚îÄ tests/            # pytest
‚îú‚îÄ‚îÄ docs/                     # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.prod.yml
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ wait-for-db.sh
‚îî‚îÄ‚îÄ .env.example
````

---

## ‚öôÔ∏è –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–¥—É–ª–µ–π

```
–ö–ª–∏–µ–Ω—Ç (Swagger / API)
        ‚îÇ
        ‚ñº
  FastAPI (routes/*)
        ‚îÇ
        ‚ñº
  Pydantic (schemas/*)
        ‚îÇ
        ‚ñº
  Services (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
        ‚îÇ
        ‚ñº
  SQLAlchemy ORM (models.py)
        ‚îÇ
        ‚ñº
  Database (Postgres/SQLite)
```

* **FastAPI** ‚Äî web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
* **Pydantic** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
* **Services** ‚Äî –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–Ω–∞–ª–∏–∑ —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏).
* **SQLAlchemy ORM** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ —á–µ—Ä–µ–∑ Python-–º–æ–¥–µ–ª–∏.
* **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã –ë–î.
* **PostgreSQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞.
* **SQLite** ‚Äî –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã –∏ dev.

---

## üóÑÔ∏è –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç:

* **users** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∞–¥–º–∏–Ω, —é—Ä–∏—Å—Ç, –∫–ª–∏–µ–Ω—Ç).
* **laws** ‚Äî –∑–∞–∫–æ–Ω—ã/–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã.
* **decisions** ‚Äî —Å—É–¥–µ–±–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.

–°–≤—è–∑–∏:

* `users` 1‚ÄìN `decisions`
* `laws` N‚ÄìM `decisions` (—á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É —Å–≤—è–∑–µ–π)

---

## üö¶ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

1. **–ö–ª–∏–µ–Ω—Ç** –¥–µ–ª–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å (`POST /api/decisions`).
2. **FastAPI router** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –≤—ã–∑—ã–≤–∞–µ—Ç Pydantic-—Å—Ö–µ–º—É.
3. **–°—Ö–µ–º–∞** –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç JSON, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ Python-–æ–±—ä–µ–∫—Ç.
4. **–°–µ—Ä–≤–∏—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `DecisionService`) –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É:

   * –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
   * –∑–∞–ø–∏—Å—å —Ä–µ—à–µ–Ω–∏—è –≤ –ë–î.
5. **SQLAlchemy ORM** ‚Üí —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è.
6. **–û—Ç–≤–µ—Ç**: Pydantic-—Å—Ö–µ–º–∞ + JSON.

---

## üê≥ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Dev (–ª–æ–∫–∞–ª–∫–∞)

* SQLite.
* –ó–∞–ø—É—Å–∫: `make run`.

### Prod (Docker Compose)

* PostgreSQL + backend.
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î (`wait-for-db.sh`).
* –ê–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic.

---

## üîÑ CI/CD

**CI (GitHub Actions)**

* `flake8` + `black` (–ª–∏–Ω—Ç–µ—Ä—ã).
* pytest (SQLite).
* –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI (`docs/API_DOCS.md`).

**CD**

* `docker compose -f docker-compose.prod.yml up -d --build`.
* –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ GitHub Releases.

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

* Python logging (`DEBUG`, `INFO`, `ERROR`).
* –õ–æ–≥ –≤ stdout (docker-friendly).
* –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:

  * **Sentry** ‚Äî –æ—à–∏–±–∫–∏.
  * **Prometheus** ‚Äî –º–µ—Ç—Ä–∏–∫–∏.

---

## üîê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏

* **admin** ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ë–î.
* **lawyer** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.
* **client** ‚Äî –ø–æ–¥–∞—á–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–≤–æ–¥–æ–≤.

---

## üìú –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

* **Dependency Injection** —á–µ—Ä–µ–∑ FastAPI Depends.
* **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
* **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î.
* **DTO** —á–µ—Ä–µ–∑ Pydantic.
* **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** —á–µ—Ä–µ–∑ `sessionmaker`.

---

## üõ£Ô∏è Roadmap

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

* Healthcheck API.
* CRUD (users, laws, decisions).
* –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL –∏ SQLite.
* Docker (dev/prod).
* CI (pytest, –∞–≤—Ç–æ–¥–æ–∫–∏).

### ‚è© –í –ø–ª–∞–Ω–∞—Ö

* –ò–º–ø–æ—Ä—Ç –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –±–∞–∑—ã (API/Excel).
* –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (APScheduler).
* –ê–Ω–∞–ª–∏–∑ —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ (ML/heuristics).
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –∏ CRM.
* –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry, Prometheus).
* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üß© Dev Notes

* –õ–æ–∫–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **SQLite** (`USE_SQLITE=1`).
* –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Alembic.
* –î–ª—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã pytest.
* –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ, —Ç–æ–ª—å–∫–æ –≤ `.env`.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

* **LOCAL_DEV.md** ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ.
* **DEPLOY.md** ‚Äî –¥–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥.
* **TROUBLESHOOTING.md** ‚Äî —Ç–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è.
* **GIT_SETUP.md** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

---

## ‚öñÔ∏è –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v2 —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture** –∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –ª—ë–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å–ª–æ–π –ë–î, —Ä–∞—Å—à–∏—Ä–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ —è–¥—Ä–∞.

```

---

–•–æ—á–µ—à—å, —è —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞—é –¥–ª—è —Ç–µ–±—è **`docs/TROUBLESHOOTING.md`** —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –≤—Å–µ—Ö —Ç–∏–ø–æ–≤—ã—Ö –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —É–∂–µ –ª–æ–≤–∏–ª–∏ (psycopg2, alembic, docker, env)?
```
