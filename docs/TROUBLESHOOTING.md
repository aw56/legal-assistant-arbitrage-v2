---
title: "TROUBLESHOOTING ‚Äî Legal Assistant Arbitrage v2.9"
version: "2.9.7"
author: "Aleksej ‚Äî Project Owner"
created: "2025-10-13"
status: "‚úÖ Stable"
description: "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º Legal Assistant Arbitrage API"
---

# ‚öôÔ∏è TROUBLESHOOTING ‚Äî Legal Assistant Arbitrage v2.9

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [PostgreSQL / psycopg2](#1-postgresql--psycopg2)
2. [Alembic](#2-alembic)
3. [Docker](#3-docker)
4. [.env –∏ –∫–æ–Ω—Ñ–∏–≥–∏](#4-env-–∏-–∫–æ–Ω—Ñ–∏–≥–∏)
5. [Makefile](#5-makefile)
6. [CI/CD –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#6-cicd-–∏-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
7. [–û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è](#7-–æ–±—â–∏–µ-–∫–æ–º–∞–Ω–¥—ã-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)
8. [–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–º](#8-–∫–∞–∫-–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è-–¥–æ–∫—É–º–µ–Ω—Ç–æ–º)

---

## üêò 1. PostgreSQL / psycopg2

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```

sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server failed

```

### üí° –†–µ—à–µ–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

   ```bash
   docker ps | grep legal-assistant-db
   ```

````

2. –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚Äî –ø–æ–¥–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å:

   ```bash
   make docker-up
   ```

3. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `.env`:

   ```dotenv
   DATABASE_URL=postgresql+psycopg2://user:password@localhost:5432/legal_assistant
   ```

---

## ‚öôÔ∏è 2. Alembic

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:

```
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column could not find table
```

### üí° –†–µ—à–µ–Ω–∏–µ

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:

   ```bash
   make db-init
   ```

2. –ü—Ä–æ–≥–æ–Ω—è–π –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ:

   ```bash
   make alembic-upgrade
   ```

3. –ï—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π ‚Äî –æ—á–∏—Å—Ç–∏ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π:

   ```bash
   alembic downgrade base && alembic upgrade head
   ```

---

## üê≥ 3. Docker

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å –æ—à–∏–±–∫–æ–π `exit code 1`.

### üí° –†–µ—à–µ–Ω–∏–µ

1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –æ–±—Ä–∞–∑—ã:

   ```bash
   make docker-rebuild
   ```

2. –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

   ```bash
   docker-compose down -v
   ```

3. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç—ã:

   ```bash
   lsof -i :8000
   ```

4. –ï—Å–ª–∏ –∑–∞–Ω—è—Ç ‚Äî –æ—Å–≤–æ–±–æ–¥–∏:

   ```bash
   kill -9 <PID>
   ```

---

## ‚öôÔ∏è 4. .env –∏ –∫–æ–Ω—Ñ–∏–≥–∏

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

`.env` –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—É—Å—Ç—ã.

### üí° –†–µ—à–µ–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞:

   ```bash
   cat .env | grep DATABASE_URL
   ```

2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

3. –í Docker –¥–æ–±–∞–≤—å:

   ```yaml
   env_file:
     - .env
   ```

4. –î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:

   ```bash
   export $(grep -v '^#' .env | xargs)
   ```

---

## üß± 5. Makefile

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥:

```
make: *** No rule to make target 'lint'.  Stop.
```

### üí° –†–µ—à–µ–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é Make:

   ```bash
   make --version
   ```

2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`~/my_projects/legal-assistant-arbitrage-v2`).

3. –û–±–Ω–æ–≤–∏ `Makefile` —á–µ—Ä–µ–∑ pull:

   ```bash
   git pull origin main
   ```

4. –í—ã–ø–æ–ª–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–µ–π:

   ```bash
   make help
   ```

---

## üö® 6. CI/CD –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

CI –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π flake8 –∏–ª–∏ pre-commit.

### üí° –†–µ—à–µ–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ:

   ```bash
   pre-commit run --all-files
   ```

2. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

   ```bash
   pre-commit clean && pre-commit install
   ```

3. –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω—ã GitHub Actions –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (—Ä–∞–∑–¥–µ–ª `Secrets ‚Üí Actions`).

---

## ü©∫ 7. –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### üîß –°–±—Ä–æ—Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### üîß –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–µ–π –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```bash
rm -rf __pycache__ .pytest_cache logs artifacts tmp
```

### üîß –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
make reset-all
```

---

## üìö 8. –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–º

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è **–±—ã—Å—Ç—Ä–æ–≥–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫** –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Legal Assistant Arbitrage API.

–ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç:

* —Ç–∏–ø–æ–≤—É—é –ø—Ä–æ–±–ª–µ–º—É;
* —à–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏;
* –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è;
* –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ä–µ–ª–∏–∑–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å:

```bash
make fix-docs-lint
```

—á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å Markdown-—Ñ–∞–π–ª–æ–≤ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Å—ã–ª–æ–∫.

---

‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** `markdownlint-cli2 v0.18.1`
‚úÖ **–°—Ç–∏–ª—å:** `General Clean Standard v2.9`
üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è —Ä–µ–≤–∏–∑–∏—è: 2025-10-16
üë§ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: **Aleksej (Project Owner)**
````
