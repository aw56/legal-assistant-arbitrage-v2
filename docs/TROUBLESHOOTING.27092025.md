–û—Ç–ª–∏—á–Ω–æ üôå
–Ø –≤—ã–Ω–µ—Å—É —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª **Troubleshooting** –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `docs/TROUBLESHOOTING.md`, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –±—ã–ª–æ —É–¥–æ–±–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ, –∞ –≤ README –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∞.

---

## üìÑ docs/TROUBLESHOOTING.md

```markdown
# üß® Troubleshooting ‚Äî Legal Assistant API v2

–°–æ–±—Ä–∞–Ω—ã —Ç–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º.

---

## üîπ –ê–¥—Ä–µ—Å —É–∂–µ –∑–∞–Ω—è—Ç (port 8000)

**–°–∏–º–ø—Ç–æ–º:**  
```

ERROR: [Errno 98] Address already in use

````

**–ü—Ä–∏—á–∏–Ω–∞:**  
–ü–æ—Ä—Ç `8000` –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º (—Å—Ç–∞—Ä—ã–π uvicorn –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).

**–†–µ—à–µ–Ω–∏–µ:**  
```bash
make kill-8000
````

–∏–ª–∏ –¥–ª—è –ª—é–±–æ–≥–æ –ø–æ—Ä—Ç–∞:

```bash
make kill-port PORT=XXXX
```

---

## üîπ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä backend –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**

* –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å/—Ö–æ—Å—Ç –ë–î
* –±–∞–∑–∞ –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**

* –ø—Ä–æ–≤–µ—Ä—å `.env.prod` (–ø–∞—Ä–æ–ª—å –±–µ–∑ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤)
* —É–±–µ–¥–∏—Å—å, —á—Ç–æ `POSTGRES_HOST=db`
* –¥–æ–∂–¥–∏—Å—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î (—Å–∫—Ä–∏–ø—Ç `wait-for-db.sh` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ SQLAlchemy)

---

## üîπ –û—à–∏–±–∫–∏ —Å –ø–∞—Ä–æ–ª–µ–º `Admin@2025!`

**–°–∏–º–ø—Ç–æ–º:**

```
database "admin" does not exist
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–í Docker —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ª–æ–º–∞–µ—Ç—Å—è –∏–∑-–∑–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–∞—Ä–æ–ª–µ.

**–†–µ—à–µ–Ω–∏–µ:**

* –î–ª—è Docker –∏—Å–ø–æ–ª—å–∑—É–π –ø–∞—Ä–æ–ª—å **–±–µ–∑ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Admin2025`)
* –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (`Admin@2025!`)

---

## üîπ –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:**
–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã.

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é:

```bash
docker exec -it legal-assistant-arbitrage-v2-backend-1 alembic upgrade head
```

---

## üîπ SQLite vs PostgreSQL

**–°–∏–º–ø—Ç–æ–º:**

```
sqlite3.OperationalError: no such table
```

**–ü—Ä–∏—á–∏–Ω–∞:**
SQLite –±–∞–∑–∞ –ø—É—Å—Ç–∞—è (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º).

**–†–µ—à–µ–Ω–∏–µ:**

* –£–±–µ–¥–∏—Å—å, —á—Ç–æ `TEST_SQLITE=1` –¥–ª—è —Ç–µ—Å—Ç–æ–≤
* –í `conftest.py` –µ—Å—Ç—å `Base.metadata.create_all()`

---

## üîπ Docker: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ —Å—Ç–∞—Ä—Ç—É—é—Ç

**–°–∏–º–ø—Ç–æ–º:**
`Error response from daemon: failed to bind host port ... address already in use`

**–ü—Ä–∏—á–∏–Ω–∞:**
–ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.

**–†–µ—à–µ–Ω–∏–µ:**

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

   ```bash
   make docker-prod-down
   ```
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã:

   ```bash
   make kill-port PORT=8080
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:

   ```bash
   make docker-prod-restart
   ```

---

## üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

* –õ–æ–≥–∏ backend:

  ```bash
  docker logs -f legal-assistant-arbitrage-v2-backend-1
  ```
* –õ–æ–≥–∏ –±–∞–∑—ã:

  ```bash
  docker logs -f legal-assistant-arbitrage-v2-db-1
  ```
* –ü—Ä–æ–≤–µ—Ä–∫–∞ healthcheck:

  ```bash
  curl http://127.0.0.1:8080/health
  ```

---

````

---

## üìå –í README –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞:

–í —Å–µ–∫—Ü–∏–∏ **Troubleshooting** –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:

```markdown
## üß® Troubleshooting

–†–∞–∑–¥–µ–ª –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª üëâ [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)
````

---

–•–æ—á–µ—à—å, —è –µ—â—ë –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é `docs/DEPLOY.md`, –≥–¥–µ –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ, –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç **–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** (—à–∞–≥–∏: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker, make env-prod, make docker-prod)?
